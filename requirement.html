<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Requirement Collector Module</title>
  <style>
    body {
      font-family: sans-serif;
      background-image: url("https://t4.ftcdn.net/jpg/02/84/46/89/360_F_284468940_1bg6BwgOfjCnE3W0wkMVMVqddJgtMynE.jpg");
      background-size: cover;
      background-position: center;
      background-attachment: fixed;  
      height: 100vh; 
      margin: 0;
      padding: 0;
    }


    h1 {
      text-align: center;
      color: white;
    }

    form {
      display: flex;
      flex-direction: column;
      width: 90%;  
      max-width: 400px; 
      margin: 20px auto;
      padding: 20px;
      border-radius: 8px;
      background-color: white;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    label {
      font-weight: bold;
      margin-top: 10px;
      display: block; 
    }

    input, select {
      width: 100%;
      padding: 10px; 
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px; 
    }
    .checkbox-container {
      display: flex;
      flex-wrap: wrap; 
      gap: 10px; 
    }
     
    .food-checkbox-container {
        display: flex;
        flex-direction: column; 
        align-items: flex-start;
    }

    .food-type-label {
      display: flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap; 
    }

    .cuisine-checkbox-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* Responsive column layout */
      gap: 10px 20px; /* Adjusts spacing */
      align-items: center;
    }

    .checkbox-label {
      display: flex;
      align-items: center;
      gap: 5px; /* Spacing between checkbox and text */
      white-space: nowrap; /* Prevents text from wrapping */
      font-weight: 500; /* Ensures consistent font */
    }


    /* Safari-specific  */
    @supports (-webkit-appearance: none) {
      .checkbox-label {
        display: flex;
        align-items: center;
      }

      input[type="checkbox"] {
        appearance: none;
        -webkit-appearance: none;
        width: 22px; 
        height: 22px;
        border: 2px solid #007bff;
        border-radius: 4px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        background-color: white;
      }

      /* Custom checkmark when checked */
      input[type="checkbox"]:checked {
        background-color: #007bff;
        border-color: #007bff;
      }
        
      
      input[type="checkbox"]:checked::before {
        content: "âœ”";
        font-size: 18px; 
        color: white;
        font-weight: bold;
        display: flex;
        justify-content: center;
        align-items: center;
      }
    }

    
    .button {
      width: 100%;  
      background-color: #007bff;
      color: white;
      padding: 12px;
      border: none;
      cursor: pointer;
      font-size: 18px;
      border-radius: 4px;
      margin-top: 15px;
      text-align: center;
    }


    .button:hover {
      background-color: #0056b3;
    }

    
    .error-message {
      color: red;
      text-align: center;
      font-size: 14px;
      margin-top: 5px;
    }
    @media (max-width: 768px) {
      .app-header {
          font-size: 22px;
      }

      .sub-header {
          font-size: 14px;
      }

      form {
          width: 95%;
          padding: 15px; /* Slightly reduce padding */
      }

      input, select {
          font-size: 16px; /* Make inputs easier to read */
          padding: 10px;
      }

      .button {
          font-size: 18px; /* Larger tap area */
          padding: 12px;
      }
    }

    @media (max-width: 480px) {
        .checkbox-container {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); /* Ensures even spacing */
          gap: 8px;
          align-items: center;
        }

        .button {
            font-size: 16px;
            padding: 10px;
        }
    }


  </style>
</head>
<body>
  <h1>Requirement Collector</h1>

  <form id="requirementForm">
    <div id="error" class="error-message"></div>

    <label for="location">Location:</label>
    <select id="location" name="location" required>
      <option value="">Select a location</option>
      <option value="vit_road_katpadi">VIT Road Katpadi</option>
      <option value="gandhi_nagar_katpadi">Gandhi Nagar Katpadi</option>
    </select>

    <label>Food Type:</label>
    <div class="food-checkbox-container">
        <label class="checkbox-label">
            <input type="checkbox" id="purevegetarian" name="foodType" value="purevegetarian" />
            Pure Vegetarian
        </label>
        <label class="checkbox-label">
            <input type="checkbox" id="vegetariannonVegetarian" name="foodType" value="vegetariannonvegetarian" />
            Vegetarian & Non-Vegetarian
        </label>
    </div>
    
    <label>Cuisine:</label>
    <div class="cuisine-checkbox-container">
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="southindian" /> South Indian
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="northindian" /> North Indian
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="chinese" /> Chinese
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="beverages" /> Beverages
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="seafood" /> Seafood
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="arabian" /> Arabian
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="italian" /> Italian
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="burgers" /> Burgers
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="biryani" /> Biryani
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="american" /> American
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="pizza" /> Pizza
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="cuisine" value="momos" /> Momos
        </label>
    </div>    

    <button type="submit" class="button">Search</button>
  </form>

  <script>
    // Fetch stored user data from localStorage (if any)
    document.addEventListener("DOMContentLoaded", function () {
      

      // Add event listeners to the food type checkboxes only one selection at a time
      const pureVegCheckbox = document.getElementById("purevegetarian");
      const vegNonVegCheckbox = document.getElementById("vegetariannonVegetarian");

      pureVegCheckbox.addEventListener("change", function() {
        if (this.checked) {
          vegNonVegCheckbox.checked = false;
        }
      });

      vegNonVegCheckbox.addEventListener("change", function() {
        if (this.checked) {
          pureVegCheckbox.checked = false;
        }
      });
    });

    // Validate, store to localStorage, and redirect
    document.getElementById("requirementForm").addEventListener("submit", function (event) {
      event.preventDefault(); 
      
      const location = document.getElementById("location").value;
      const foodTypeElems = document.querySelectorAll('input[name="foodType"]:checked');
      const cuisineElems = document.querySelectorAll('input[name="cuisine"]:checked');
      const errorDiv = document.getElementById("error");

      errorDiv.textContent = ""; // Clear previous errors

      if (!location) {
        errorDiv.textContent = "Location is required.";
        return;
      }
      if (foodTypeElems.length === 0) {
        errorDiv.textContent = "Please select at least one food type.";
        return;
      }
      if (cuisineElems.length === 0) {
        errorDiv.textContent = "Please select at least one cuisine.";
        return;
      }

      localStorage.setItem("selectedLocation", location);

      // NodeLists to arrays
      const selectedFoodTypes = Array.from(foodTypeElems).map(el => el.value);
      const selectedCuisines = Array.from(cuisineElems).map(el => el.value.toLowerCase());

      localStorage.setItem("selectedFoodTypes", JSON.stringify(selectedFoodTypes));
      localStorage.setItem("selectedCuisines", JSON.stringify(selectedCuisines));

      window.location.href = "hotel_suggestor.html";
    });

    const requirementForm = document.getElementById("requirementForm");
    requirementForm.addEventListener("submit", (event) => {
      event.preventDefault();
      const formData = new FormData(requirementForm);
      console.log("Submitted data:", Object.fromEntries(formData.entries()));
    });
  </script>
</body>
</html>
